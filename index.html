<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>San ValentÃ­n ğŸ’–</title>

<style>
:root{
  --pink:#ff4d6d;
  --pink2:#ffd6e0;
  --wine:#a11f3b;
  --bg:#fff5f7;
  --shadow:0 14px 34px rgba(0,0,0,.12);
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:Arial, Helvetica, sans-serif;
  background:var(--bg);
  overflow:hidden;
}

.bg{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:0;
  opacity:.95;
}
.petal{
  position:absolute;
  font-size:28px;
  opacity:.85;
  animation:drift linear infinite;
  filter: drop-shadow(0 10px 14px rgba(0,0,0,0.12));
}
@keyframes drift{
  0%{ transform: translateY(-12vh) translateX(0) rotate(0deg); }
  100%{ transform: translateY(112vh) translateX(8vw) rotate(240deg); }
}

.musicFab{
  position:fixed;
  top:14px;
  right:14px;
  z-index:5;
  background:rgba(255,255,255,.72);
  border:1px solid rgba(255,179,193,.9);
  color:var(--wine);
  border-radius:999px;
  padding:10px 12px;
  cursor:pointer;
  box-shadow:0 10px 25px rgba(0,0,0,.10);
  display:flex;
  align-items:center;
  gap:8px;
  transition:.2s;
  user-select:none;
}
.musicFab:hover{ background:rgba(255,255,255,.92); transform:translateY(-1px); }
.musicFab small{ font-weight:800; opacity:.85; }
.dot{
  width:10px;height:10px;border-radius:50%;
  background:#bbb;
  box-shadow:0 0 0 3px rgba(255,77,109,.18);
}
.dot.on{ background:var(--pink); box-shadow:0 0 0 4px rgba(255,77,109,.28); }

.wrap{
  position:relative;
  z-index:1;
  padding:18px;
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}

.card{
  width:min(980px, 96vw);
  background:#fff;
  border-radius:18px;
  box-shadow:var(--shadow);
  overflow:hidden;
}

.header{
  padding:18px 18px 0;
  text-align:center;
}
h1{
  margin:0;
  color:var(--pink);
  font-size: clamp(28px, 3.5vw, 44px);
  letter-spacing:.2px;
}
.sub{
  margin:8px 0 0;
  color:#6b6b6b;
  font-size:14px;
}

.grid{
  display:grid;
  gap:16px;
  padding:16px 18px 20px;
  grid-template-columns: 1.15fr 0.85fr;
  align-items:stretch;
}

@media (max-width: 820px){
  .grid{ grid-template-columns: 1fr; }
}

.panel{
  background:#fff;
  border-radius:16px;
  overflow:hidden;
}

.carousel{
  height:100%;
  display:flex;
  flex-direction:column;
  gap:10px;
}

.photoWrap{
  position:relative;
  flex:1;
  min-height:260px;
  border-radius:16px;
  overflow:hidden;
  box-shadow:0 10px 26px rgba(0,0,0,.14);
  background:#f3f3f3;
}
.photoWrap img{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
}
.photoWrap::after{
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(to top, rgba(0,0,0,.20), rgba(0,0,0,0));
  pointer-events:none;
}
.cap{
  position:absolute;
  left:12px;
  bottom:10px;
  color:#fff;
  font-size:12px;
  font-weight:800;
  text-shadow:0 2px 10px rgba(0,0,0,.35);
}

.navs{
  display:flex;
  justify-content:center;
  gap:10px;
  flex-wrap:wrap;
}
button{
  padding:12px 18px;
  border:none;
  border-radius:12px;
  font-weight:900;
  cursor:pointer;
  transition:.18s;
  user-select:none;
  touch-action:manipulation;
  font-size:16px;
}
button:active{ transform:scale(.98); }

.navBtn{
  background:#f2f2f2;
  border:1px solid #e6e6e6;
  color:#444;
  min-width:52px;
}
.yes{
  background:var(--pink);
  color:#fff;
  transform:scale(1);
}
.no{
  background:var(--pink2);
  color:var(--wine);
  border:1px solid #ffb3c1;
  transform:scale(1);
}

.textSide{
  display:flex;
  flex-direction:column;
  gap:14px;
  padding:10px 4px;
}

.invite{
  background:#fff;
  border-radius:16px;
  padding:14px 14px;
  border:1px solid rgba(255,179,193,.55);
}
.invite p{
  margin:0;
  color:#444;
  line-height:1.65;
  font-size: clamp(14px, 2.1vw, 16px);
}
.invite .em{
  margin-top:10px;
  font-weight:900;
  color:var(--wine);
}

.ask{
  text-align:center;
  font-weight:900;
  color:var(--wine);
  font-size: clamp(16px, 2.4vw, 18px);
}

.yn{
  display:flex;
  justify-content:center;
  gap:12px;
  flex-wrap:wrap;
  margin-top:2px;
}

.hint{
  text-align:center;
  font-size:12px;
  color:#7a7a7a;
}

.modalBg{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.55);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:10;
  padding:18px;
}
.modal{
  background:#fff;
  width:min(460px, 92vw);
  border-radius:18px;
  padding:22px 18px;
  text-align:center;
  box-shadow:0 22px 55px rgba(0,0,0,.25);
}
.modal h2{
  margin:0 0 10px;
  color:var(--wine);
  font-size:22px;
}
.modal p{
  margin:0 0 14px;
  color:#444;
  line-height:1.55;
}
.modal .mini{
  font-size:12px;
  color:#7a7a7a;
  margin-top:8px;
}
.modal .row{
  display:flex;
  justify-content:center;
  gap:10px;
  flex-wrap:wrap;
}
.modalBtnPrimary{
  background:var(--pink);
  color:#fff;
}
.modalBtnGhost{
  background:#f2f2f2;
  border:1px solid #e6e6e6;
  color:#444;
}
#autoplayWarn{
  display:none;
  margin-top:10px;
  font-size:12px;
  color:#7a7a7a;
}

.plan{
  margin-top:10px;
  font-weight:900;
  color:var(--wine);
  line-height:1.7;
}

@media (prefers-reduced-motion: reduce){
  .petal{ animation:none; }
  .musicFab{ transition:none; }
  button{ transition:none; }
}
</style>
</head>

<body>

<div class="bg" aria-hidden="true" id="bg"></div>

<div class="musicFab" id="musicFab" title="MÃºsica">
  <span class="dot" id="musicDot"></span>
  <small id="musicText">mÃºsica</small>
</div>

<div class="modalBg" id="startModal">
  <div class="modal">
    <h2>Hola, Katyuska ğŸ’–</h2>
    <p>Â¿EstÃ¡s lista? Tengo algo que decirteâ€¦</p>
    <div class="row">
      <button class="modalBtnPrimary" type="button" onclick="startExperience()">SÃ­, estoy lista âœ¨</button>
    </div>
    <div id="autoplayWarn">Si no suena, toca el botoncito de mÃºsica arriba a la derecha ğŸ¶</div>
  </div>
</div>

<div class="modalBg" id="errorModal">
  <div class="modal">
    <h2>Error del sistema romÃ¡ntico ğŸ’”</h2>
    <p>Esa respuesta no era vÃ¡lidaâ€¦ intenta nuevamente ğŸ˜Œ</p>
    <div class="row">
      <button class="modalBtnPrimary" type="button" onclick="closeError()">Reintentar</button>
    </div>
    <div class="mini">Pista: creo que ya sÃ© cuÃ¡l es la respuesta correcta ğŸ‘€</div>
  </div>
</div>

<div class="modalBg" id="yesModal">
  <div class="modal">
    <h2>Ya sabÃ­a ğŸ˜ŒğŸ’–</h2>
    <p>Entonces queda confirmadoâ€¦</p>
    <div class="plan">
      Unos vinito ğŸ·,<br>
      una carne ğŸ¥©,<br>
      cenita en casita,<br>
      viendo fotos ğŸ“¸<br>
      y escuchando musiquita juntos ğŸ¶
    </div>
    <div class="row" style="margin-top:14px;">
      <button class="modalBtnPrimary" type="button" onclick="closeYes()">Listo ğŸ’</button>
    </div>
  </div>
</div>

<div class="wrap">
  <div class="card">
    <div class="header">
      <h1>Katyuska ğŸ’–</h1>
      <div class="sub">Un ratito juntosâ€¦ ğŸŒ¹ğŸŒ·ğŸ’—</div>
    </div>

    <div class="grid">
      <div class="panel">
        <div class="carousel">
          <div class="photoWrap">
            <img id="photo" alt="Foto" />
            <div class="cap" id="cap"></div>
          </div>

          <div class="navs">
            <button class="navBtn" type="button" onclick="prev()">â†</button>
            <button class="navBtn" type="button" onclick="next()">â†’</button>
          </div>

          <div class="hint">Tip: toca la foto para pasar a la siguiente ğŸ“¸</div>
        </div>
      </div>

      <div class="panel">
        <div class="textSide">
          <div class="invite">
            <p>
              Hoy me nace celebrarnos, asÃ­ de simple. ğŸ’—<br>
              Siento que ya estamos saliendo de los momentos mÃ¡s duros,<br>
              y me hace ilusiÃ³n hacer algo bonito contigo: tranquilo, cÃ¡lido, nuestro. ğŸŒ·
            </p>
            <div class="em">Â¿Te animas a que este San ValentÃ­n sea de nosotros? ğŸ’</div>
          </div>

          <div class="ask">Â¿Aceptas celebrar San ValentÃ­n conmigo? ğŸ’˜</div>

          <div class="yn">
            <button id="yes" class="yes" type="button" onclick="accept()">SÃ­ ğŸ’–</button>
            <button id="no" class="no" type="button" onclick="errorNo()">No ğŸ™ˆ</button>
          </div>

          <div class="hint">ğŸŒ¹ ğŸ’— ğŸŒ· ğŸ’˜ ğŸŒ¸</div>
        </div>
      </div>
    </div>
  </div>
</div>

<audio id="audio" preload="auto" src="Sabino - Conmigo Siempre - SabinoVEVO.mp3"></audio>

<script>
const photos = [
  "Fotos/IMG_1787.jpg",
  "Fotos/IMG_2566.jpg",
  "Fotos/IMG_4685.jpg",
  "Fotos/IMG_20220317_144715933.jpg",
  "Fotos/IMG-20211201-WA0028.jpeg"
];

let i = 0;

const img = document.getElementById("photo");
const cap = document.getElementById("cap");
const audio = document.getElementById("audio");

const startModal = document.getElementById("startModal");
const errorModal = document.getElementById("errorModal");
const yesModal = document.getElementById("yesModal");
const autoplayWarn = document.getElementById("autoplayWarn");

const musicFab = document.getElementById("musicFab");
const musicDot = document.getElementById("musicDot");
const musicText = document.getElementById("musicText");

function show(){
  img.src = photos[i];
  cap.textContent = (i+1) + " / " + photos.length;
}
function next(){
  i = (i + 1) % photos.length;
  show();
}
function prev(){
  i = (i - 1 + photos.length) % photos.length;
  show();
}

function setMusicUi(isOn){
  musicDot.classList.toggle("on", !!isOn);
  musicText.textContent = isOn ? "sonando" : "mÃºsica";
}

function playMusic(){
  audio.volume = 0.85;
  return audio.play().then(()=>{
    setMusicUi(true);
    autoplayWarn.style.display = "none";
  }).catch(()=>{
    setMusicUi(false);
    autoplayWarn.style.display = "block";
    throw new Error("autoplay blocked");
  });
}

function toggleMusic(){
  if(audio.paused){
    playMusic().catch(()=>{});
  }else{
    audio.pause();
    setMusicUi(false);
  }
}

musicFab.addEventListener("click", toggleMusic);

function startExperience(){
  startModal.style.display = "none";
  playMusic().catch(()=>{});
}

function errorNo(){
  errorModal.style.display = "flex";

  const yes = document.getElementById("yes");
  const no = document.getElementById("no");

  let ys = Number(yes.dataset.scale || 1);
  let ns = Number(no.dataset.scale || 1);

  ys += 0.18;
  ns = Math.max(0.55, ns - 0.10);

  yes.dataset.scale = String(ys);
  no.dataset.scale = String(ns);

  yes.style.transform = "scale(" + ys + ")";
  no.style.transform = "scale(" + ns + ")";
}

function closeError(){
  errorModal.style.display = "none";
}

function accept(){
  yesModal.style.display = "flex";
  playMusic().catch(()=>{});
}

function closeYes(){
  yesModal.style.display = "none";
}

img.addEventListener("click", next);
img.addEventListener("error", () => {
  cap.textContent = "No se pudo cargar: " + photos[i];
});

function seedBg(){
  const bg = document.getElementById("bg");
  const items = ["ğŸ’–","ğŸ’—","ğŸ’•","ğŸŒ¹","ğŸŒ·","ğŸŒ¸","ğŸ’˜"];
  const n = 22;
  for(let k=0;k<n;k++){
    const s = document.createElement("div");
    s.className = "petal";
    s.textContent = items[Math.floor(Math.random()*items.length)];
    const left = Math.random()*100;
    const dur = 6 + Math.random()*8;
    const delay = Math.random()*6;
    const size = 18 + Math.random()*18;
    s.style.left = left + "vw";
    s.style.animationDuration = dur + "s";
    s.style.animationDelay = (-delay) + "s";
    s.style.fontSize = size + "px";
    s.style.top = (-10 - Math.random()*40) + "vh";
    bg.appendChild(s);
  }
}

show();
seedBg();
startModal.style.display = "flex";
setInterval(()=>{ next(); }, 6500);
</script>

</body>
</html>
